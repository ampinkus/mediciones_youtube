<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

*   [app][1]
*   [Router][2]
*   [Router][3]
*   [get][4]
*   [get][5]
*   [get][6]
*   [get][7]
*   [get][8]
*   [get][9]
*   [get][10]
*   [get][11]
*   [get][12]
*   [get][13]
*   [mostrarHome][14]
    *   [Parameters][15]
*   [mostrarHome][16]
    *   [Parameters][17]
*   [mostrarHome][18]
    *   [Parameters][19]
*   [post][20]
*   [post][21]
*   [post][22]
*   [post][23]
*   [sequelize][24]
*   [sequelize][25]
*   [sequelize][26]
*   [sequelize][27]
*   [formatearFecha][28]
    *   [Parameters][29]
*   [formatearHora][30]
    *   [Parameters][31]
*   [verStreams][32]
    *   [Parameters][33]
*   [formularioAgregar][34]
    *   [Parameters][35]
*   [guardarStream][36]
    *   [Parameters][37]
*   [verStream][38]
    *   [Parameters][39]
*   [formularioEditar][40]
    *   [Parameters][41]
*   [actualizarStream][42]
    *   [Parameters][43]
*   [eliminarStream][44]
    *   [Parameters][45]
*   [toggleStream][46]
    *   [Parameters][47]
*   [obtenerNombreDesdeURL][48]
    *   [Parameters][49]
*   [moment][50]
*   [moment][51]
*   [mostrarFormulario][52]
    *   [Parameters][53]
*   [mostrarFormulario][54]
    *   [Parameters][55]
*   [generarTabla][56]
    *   [Parameters][57]
*   [generarGrafico][58]
    *   [Parameters][59]
*   [server][60]
*   [startServer][61]
*   [convertirAHoraArgentina][62]
    *   [Parameters][63]
*   [obtenerDatosYouTube][64]
    *   [Parameters][65]
*   [supervisor][66]
*   [medirStreamConTimeout][67]
    *   [Parameters][68]
*   [iniciarMediciones][69]
*   [DataTypes][70]
*   [DataTypes][71]
*   [DataTypes][72]
*   [extraerVideoID][73]
    *   [Parameters][74]
*   [extraerVideoID][75]
    *   [Parameters][76]
*   [apiKey][77]
*   [saludar][78]
    *   [Parameters][79]
*   [saludar][80]
    *   [Parameters][81]
*   [utils][82]

## app

Punto de entrada principal de la aplicaci√≥n Express.
Configura middlewares, motor de plantillas y rutas.

Este m√≥dulo sirve como bootstrap de todo el sistema:

*   Carga rutas principales del sistema.
*   Configura el motor de vistas con EJS.
*   Sirve archivos est√°ticos como scripts y estilos desde /public y /modulos.

## Router

Rutas correspondientes a la p√°gina principal del sistema.
Este m√≥dulo define la ruta para acceder al Home del sistema.

## Router

Rutas para la gesti√≥n de streams de YouTube.
Incluye funcionalidades para ver, agregar, editar, eliminar y activar streams.

## get

Muestra la p√°gina principal del sistema (Home)

## get

Lista todos los streams de YouTube

## get

Muestra el formulario para agregar un nuevo stream

## get

Muestra el detalle de un stream espec√≠fico

## get

Muestra el formulario para editar un stream

## get

Obtiene autom√°ticamente el nombre del stream a partir de la URL

## get

Muestra el formulario principal de DataTables para YouTube

## get

Devuelve los datos en formato JSON para poblar la tabla de YouTube

## get

Muestra el formulario donde el usuario elige los par√°metros del gr√°fico

## get

Genera el gr√°fico con los datos filtrados por el usuario

## mostrarHome

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## mostrarHome

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## mostrarHome

Renderiza la p√°gina de inicio.

### Parameters

*   `req` **Express.Request** Objeto de solicitud HTTP de Express.
*   `res` **Express.Response** Objeto de respuesta HTTP de Express.

Returns **void**&#x20;

## post

Procesa la creaci√≥n de un nuevo stream

## post

Procesa la actualizaci√≥n de un stream

## post

Elimina un stream por su ID

## post

Activa o desactiva la medici√≥n del stream

## sequelize

## sequelize

## sequelize

graficosYoutube.controller.js

Este controlador maneja:

*   La visualizaci√≥n del formulario para generar gr√°ficos.
*   El procesamiento de filtros de fecha, hora y stream para consultas.
*   La organizaci√≥n de los datos de medici√≥n para ser enviados al gr√°fico.
*   La renderizaci√≥n de gr√°ficos usando los datos agrupados por stream.

## sequelize

‚úÖ Configuraci√≥n de conexi√≥n a la base de datos PostgreSQL.

Se utiliza para conectar el sistema a la base de datos `medicion_redes` en el host local.
Este objeto Sequelize se importa en los modelos y controladores que requieren acceso a la base.

Type: Sequelize

## formatearFecha

Convierte una fecha en formato ISO (YYYY-MM-DD o completo) a formato DD/MM/YYYY.

### Parameters

*   `fechaISO` **([string][83] | null | [undefined][84])** Fecha en formato ISO.

Returns **([string][83] | null)** Fecha formateada en formato DD/MM/YYYY o null si es inv√°lida.

## formatearHora

Formatea una hora quitando los segundos, dejando solo HH:mm.

### Parameters

*   `horaCompleta` **([string][83] | null | [undefined][84])** Hora en formato HH:mm:ss.

Returns **[string][83]** Hora en formato HH:mm, o cadena vac√≠a si es inv√°lida.

## verStreams

Muestra todos los streams con sus configuraciones asociadas.

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## formularioAgregar

Muestra el formulario para agregar un nuevo stream.

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## guardarStream

Guarda un nuevo stream junto con su configuraci√≥n. Extrae las horas desde la API de YouTube si es posible.

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## verStream

Muestra los datos detallados de un stream individual.

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## formularioEditar

Muestra el formulario para editar un stream existente.

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## actualizarStream

Actualiza los datos de un stream existente.

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## eliminarStream

Elimina un stream y toda su informaci√≥n relacionada.

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## toggleStream

Cambia el estado de activo/inactivo de un stream.

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## obtenerNombreDesdeURL

Consulta a la API de YouTube para obtener el t√≠tulo del canal y el t√≠tulo del video.

### Parameters

*   `req` &#x20;
*   `res` &#x20;

## moment

## moment

datatablesYoutube.controller.js

Este m√≥dulo contiene los controladores para:

*   Mostrar el formulario de selecci√≥n para generar una tabla de mediciones.
*   Consultar las mediciones de YouTube desde la base de datos.
*   Filtrar por fechas, horas y stream espec√≠fico.
*   Renderizar una tabla con los resultados formateados para visualizaci√≥n.

## mostrarFormulario

Muestra el formulario para seleccionar un stream y fechas/horas para generar una tabla.

### Parameters

*   `req` **Express.Request** Objeto de solicitud HTTP de Express.
*   `res` **Express.Response** Objeto de respuesta HTTP de Express.

Returns **[Promise][85]\<void>**&#x20;

## mostrarFormulario

Muestra el formulario para seleccionar streams, fechas y horas para generar gr√°ficos.

### Parameters

*   `req` **Express.Request** Objeto de solicitud HTTP de Express.
*   `res` **Express.Response** Objeto de respuesta HTTP de Express.

Returns **[Promise][85]\<void>**&#x20;

## generarTabla

Genera y renderiza la tabla de mediciones de YouTube seg√∫n los filtros ingresados.

### Parameters

*   `req` **Express.Request** Objeto de solicitud HTTP de Express.
*   `res` **Express.Response** Objeto de respuesta HTTP de Express.

Returns **[Promise][85]\<void>**&#x20;

## generarGrafico

Procesa la solicitud del formulario y genera los datos necesarios para los gr√°ficos.

### Parameters

*   `req` **Express.Request** Objeto de solicitud HTTP de Express.
*   `res` **Express.Response** Objeto de respuesta HTTP de Express.

Returns **[Promise][85]\<void>**&#x20;

## server

Archivo principal para levantar el servidor.

*   Conecta con la base de datos usando Sequelize.
*   Inicia el servidor Express.
*   Inicia las tareas programadas (como mediciones peri√≥dicas de YouTube).

## startServer

Inicia la aplicaci√≥n Express y verifica la conexi√≥n a la base de datos.

Returns **[Promise][85]\<void>**&#x20;

## convertirAHoraArgentina

Convierte una hora en formato UTC a la hora local de Argentina (HH:mm:ss).

### Parameters

*   `utcString` **([string][83] | null)** Hora en formato ISO UTC.

Returns **([string][83] | null)** Hora convertida a la zona 'America/Argentina/Buenos\_Aires'.

## obtenerDatosYouTube

Obtiene y guarda los datos de un stream de YouTube.

### Parameters

*   `stream` **[object][86]** Objeto del stream con datos y configuraci√≥n.

## supervisor

Supervisa e inicia las mediciones para todos los streams activos.

## medirStreamConTimeout

Ejecuta una medici√≥n programada para un stream en base a su configuraci√≥n.

### Parameters

*   `stream` **[object][86]** Stream a medir (puede ser parcial, solo requiere `id`).

## iniciarMediciones

Inicia el proceso de mediciones luego de verificar la conexi√≥n a la base de datos.

## DataTypes

Modelo Sequelize: StreamYouTube

Representa un stream de YouTube a medir.

‚úÖ Campos definidos:

*   nombre\_stream: Nombre descriptivo del stream (ej. "Canal XYZ - Video en Vivo").
*   url\_stream: Enlace directo al video del stream de YouTube.
*   id\_canal: ID √∫nico del canal de YouTube asociado al stream.

üìå Relaciones:

*   Uno a muchos con MedicionYouTube (un stream puede tener m√∫ltiples mediciones).

## DataTypes

Modelo Sequelize: ConfiguracionYouTube

Define la configuraci√≥n individual para cada stream de YouTube en el sistema de mediciones.

‚úÖ Campos definidos:

*   streamId: Clave primaria y clave for√°nea hacia StreamYouTube.
*   fecha: Fecha de inicio de la medici√≥n.
*   fecha\_final: Fecha final opcional para finalizar la medici√≥n.
*   hora\_comienzo\_medicion: Hora manual de inicio (opcional).
*   hora\_fin\_medicion: Hora manual de finalizaci√≥n (opcional).
*   actual\_start\_time: Hora real de inicio extra√≠da de la API (opcional).
*   actual\_end\_time: Hora real de finalizaci√≥n extra√≠da de la API (opcional).
*   intervalo\_medicion: Intervalo entre mediciones en minutos (1 a 1440).
*   activo: Indica si el stream est√° activo para medici√≥n.

üìå Relaciones:

*   Uno a uno con StreamYouTube mediante streamId.

Este modelo se utiliza en medicionYoutube.js y otros componentes para controlar los rangos de medici√≥n y frecuencia.

## DataTypes

Modelo Sequelize: MedicionYouTube

Representa una medici√≥n puntual de un stream de YouTube.
Cada registro corresponde a una observaci√≥n realizada en una fecha y hora espec√≠fica.

‚úÖ Campos definidos:

*   streamId: ID del stream asociado (clave for√°nea hacia streams\_youtube).
*   fecha: Fecha en la que se realiz√≥ la medici√≥n (YYYY-MM-DD).
*   hora\_medicion: Hora exacta de la medici√≥n (HH:mm:ss).
*   suscriptores\_canal: Cantidad total de suscriptores del canal en el momento de la medici√≥n.
*   cantidad\_videos\_canal: Total de videos en el canal.
*   vistas\_canal: Cantidad total de vistas del canal.
*   view\_count: Cantidad de vistas del video en vivo.
*   concurrent\_viewers: Espectadores concurrentes (si est√° disponible).
*   likes\_video: Total de likes del video.
*   comentarios\_video: Total de comentarios del video.

üìå Relaciones:

*   Muchos a uno con StreamYouTube (por medio de streamId).

Este modelo se utiliza en `medicionYoutube.js` para registrar estad√≠sticas durante la transmisi√≥n.

## extraerVideoID

### Parameters

*   `url` &#x20;

## extraerVideoID

Extrae el ID de un video de YouTube a partir de una URL completa.

Esta funci√≥n soporta distintos formatos de URLs de YouTube, incluyendo:

*   [https://www.youtube.com/watch?v=VIDEO\_ID][87]
*   [https://youtu.be/VIDEO\_ID][88]
*   [https://www.youtube.com/embed/VIDEO\_ID][89]
*   [https://www.youtube.com/shorts/VIDEO\_ID][90]

Si no encuentra un ID v√°lido, devuelve la URL original sin espacios.

### Parameters

*   `url` **[string][83]** La URL del video de YouTube.

Returns **[string][83]** El ID del video (11 caracteres) o la URL limpia si no se puede extraer.

## apiKey

Clave de API para acceder a los servicios de YouTube Data API v3.

Esta clave se utiliza para realizar solicitudes autenticadas a la API
desde los controladores del sistema, como `medicionYoutube.js` y `youtube.controller.js`.

‚ö†Ô∏è IMPORTANTE: No compartas esta clave p√∫blicamente en producci√≥n.

Type: [string][83]

## saludar

### Parameters

*   `nombre` &#x20;

## saludar

Dice hola

### Parameters

*   `nombre` **[string][83]** El nombre a saludar

Returns **[string][83]**&#x20;

## utils

Utilidad para obtener la ruta del archivo actual (`__filename`) y su directorio (`__dirname`)
usando `import.meta.url`, √∫til para evitar l√≥gica repetida en `app.js`.

Este patr√≥n es com√∫n en aplicaciones ES Modules para resolver rutas relativas.

[1]: #app

[2]: #router

[3]: #router-1

[4]: #get

[5]: #get-1

[6]: #get-2

[7]: #get-3

[8]: #get-4

[9]: #get-5

[10]: #get-6

[11]: #get-7

[12]: #get-8

[13]: #get-9

[14]: #mostrarhome

[15]: #parameters

[16]: #mostrarhome-1

[17]: #parameters-1

[18]: #mostrarhome-2

[19]: #parameters-2

[20]: #post

[21]: #post-1

[22]: #post-2

[23]: #post-3

[24]: #sequelize

[25]: #sequelize-1

[26]: #sequelize-2

[27]: #sequelize-3

[28]: #formatearfecha

[29]: #parameters-3

[30]: #formatearhora

[31]: #parameters-4

[32]: #verstreams

[33]: #parameters-5

[34]: #formularioagregar

[35]: #parameters-6

[36]: #guardarstream

[37]: #parameters-7

[38]: #verstream

[39]: #parameters-8

[40]: #formularioeditar

[41]: #parameters-9

[42]: #actualizarstream

[43]: #parameters-10

[44]: #eliminarstream

[45]: #parameters-11

[46]: #togglestream

[47]: #parameters-12

[48]: #obtenernombredesdeurl

[49]: #parameters-13

[50]: #moment

[51]: #moment-1

[52]: #mostrarformulario

[53]: #parameters-14

[54]: #mostrarformulario-1

[55]: #parameters-15

[56]: #generartabla

[57]: #parameters-16

[58]: #generargrafico

[59]: #parameters-17

[60]: #server

[61]: #startserver

[62]: #convertirahoraargentina

[63]: #parameters-18

[64]: #obtenerdatosyoutube

[65]: #parameters-19

[66]: #supervisor

[67]: #medirstreamcontimeout

[68]: #parameters-20

[69]: #iniciarmediciones

[70]: #datatypes

[71]: #datatypes-1

[72]: #datatypes-2

[73]: #extraervideoid

[74]: #parameters-21

[75]: #extraervideoid-1

[76]: #parameters-22

[77]: #apikey

[78]: #saludar

[79]: #parameters-23

[80]: #saludar-1

[81]: #parameters-24

[82]: #utils

[83]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[84]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined

[85]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[86]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[87]: https://www.youtube.com/watch?v=VIDEO_ID

[88]: https://youtu.be/VIDEO_ID

[89]: https://www.youtube.com/embed/VIDEO_ID

[90]: https://www.youtube.com/shorts/VIDEO_ID
